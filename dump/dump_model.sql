CREATE TABLE users (
	id SERIAL PRIMARY KEY,
	uuid TEXT UNIQUE NOT NULL,
	name VARCHAR(100) NOT NULL DEFAULT 'unamed',
	email VARCHAR(100) NOT NULL UNIQUE,
	password VARCHAR(100) NOT NULL,
	is_doctor BOOLEAN NOT NULL DEFAULT FALSE,
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW() NOT NULL
);

CREATE TABLE specializations (
	id SERIAL PRIMARY KEY,
	uuid TEXT UNIQUE NOT NULL,
	name VARCHAR(50) NOT NULL,
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW() NOT NULL
);

CREATE TABLE dates (
	id SERIAL PRIMARY KEY,
	uuid TEXT UNIQUE NOT NULL,
	start VARCHAR(5) NOT NULL DEFAULT '00:00',
	finish VARCHAR(5) NOT NULL DEFAULT '00:00',
	day VARCHAR(10) NOT NULL DEFAULT '01-01-1980',
	doctor_uuid TEXT NOT NULL REFERENCES users(uuid),
	avaliable BOOLEAN NOT NULL DEFAULT FALSE,
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW() NOT NULL
);

CREATE TABLE consultations (
	id SERIAL PRIMARY KEY,
	uuid TEXT UNIQUE NOT NULL,
	patient_uuid TEXT NOT NULL REFERENCES users(uuid),
	doctor_uuid TEXT NOT NULL REFERENCES users(uuid),
	date_uuid TEXT NOT NULL REFERENCES dates(uuid),
	specialization_uuid TEXT NOT NULL REFERENCES specializations(uuid),
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW() NOT NULL
);

CREATE TABLE locations (
	id SERIAL PRIMARY KEY,
	uuid TEXT UNIQUE NOT NULL,
	user_uuid TEXT NOT NULL REFERENCES users(uuid),
	district_uuid INTEGER NOT NULL REFERENCES cities(uuid),
	created_at TIMESTAMP WITHOUT TIME ZONE DEFAULT NOW() NOT NULL
);

CREATE TABLE states(
    id SERIAL NOT NULL PRIMARY KEY,
    uf VARCHAR(2) NOT NULL UNIQUE,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE cities(
    id SERIAL NOT NULL PRIMARY KEY,
    name VARCHAR(150) NOT NULL,
    state_id INTEGER NOT NULL,
    FOREIGN KEY(state_id) REFERENCES states(id)
);

CREATE TABLE districts(
    id SERIAL NOT NULL PRIMARY KEY,
    name VARCHAR(200) NOT NULL,
    city_id INTEGER NOT NULL,
    FOREIGN KEY(city_id) REFERENCES cities(id)
);